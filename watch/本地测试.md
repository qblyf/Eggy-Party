# 本地测试指南

## 🧪 在电脑上测试

### 方法一：直接打开（最简单）

1. **打开测试页面**
   ```
   双击打开：watch/test.html
   ```
   这会显示一个模拟手表屏幕的预览

2. **或直接打开游戏**
   ```
   双击打开：watch/index.html
   ```
   在浏览器中全屏查看

### 方法二：启动本地服务器（推荐）

PWA 功能需要 HTTPS 或 localhost，所以建议用本地服务器测试。

#### 使用 Python（如果已安装）

```bash
# 进入 watch 目录
cd watch

# Python 3
python3 -m http.server 8080

# 或 Python 2
python -m SimpleHTTPServer 8080

# 打开浏览器访问
# http://localhost:8080
```

#### 使用 Node.js（如果已安装）

```bash
# 安装 serve（只需一次）
npm install -g serve

# 进入 watch 目录
cd watch

# 启动服务器
serve

# 或指定端口
serve -p 8080

# 打开浏览器访问显示的地址
```

#### 使用 PHP（如果已安装）

```bash
# 进入 watch 目录
cd watch

# 启动服务器
php -S localhost:8080

# 打开浏览器访问
# http://localhost:8080
```

## 📱 在手机上测试

### 方法一：使用本地服务器

1. **启动服务器**
   ```bash
   cd watch
   python3 -m http.server 8080
   ```

2. **查看电脑IP地址**
   
   Mac/Linux:
   ```bash
   ifconfig | grep "inet "
   ```
   
   Windows:
   ```bash
   ipconfig
   ```
   
   找到类似 `192.168.x.x` 的地址

3. **手机访问**
   - 确保手机和电脑在同一WiFi
   - 手机浏览器打开：`http://192.168.x.x:8080`
   - 测试所有功能

4. **测试 PWA**
   - 点击浏览器菜单
   - 选择"添加到主屏幕"
   - 测试离线功能

### 方法二：临时部署测试

使用 Vercel 或 Netlify 快速部署测试版本

## 🔍 测试清单

### 基本功能测试

- [ ] 页面能正常打开
- [ ] 样式显示正确
- [ ] 点击盲盒能抽取
- [ ] 点击按钮能抽取
- [ ] 结果卡片正常显示
- [ ] 收藏区域正常显示
- [ ] 筛选功能正常工作

### 数据功能测试

- [ ] 抽取次数正确统计
- [ ] 收集数量正确统计
- [ ] 完成度正确计算
- [ ] 刷新页面数据不丢失
- [ ] 重复抽到的数量累加

### 界面测试

- [ ] 在小屏幕上显示正常（320x320）
- [ ] 按钮大小合适，易于点击
- [ ] 文字大小清晰可读
- [ ] 颜色对比度足够
- [ ] 动画流畅不卡顿

### PWA 功能测试

- [ ] manifest.json 正确加载
- [ ] Service Worker 注册成功
- [ ] 可以添加到主屏幕
- [ ] 图标显示正确
- [ ] 离线时能打开（添加到主屏幕后）

### 性能测试

- [ ] 首次加载速度快（< 3秒）
- [ ] 点击响应及时
- [ ] 动画流畅
- [ ] 内存占用合理
- [ ] 不会卡顿

### 兼容性测试

在不同浏览器测试：
- [ ] Chrome/Edge
- [ ] Safari（iOS）
- [ ] Firefox
- [ ] 手机浏览器
- [ ] 小天才手表浏览器（如果可以）

## 🐛 调试技巧

### 查看控制台

1. **电脑浏览器**
   - 按 F12 打开开发者工具
   - 查看 Console 标签
   - 检查是否有错误

2. **手机浏览器**
   - Chrome: 访问 `chrome://inspect`
   - Safari: 开启开发者模式

### 测试不同屏幕尺寸

1. **Chrome DevTools**
   - 按 F12
   - 点击设备图标（Toggle device toolbar）
   - 选择或自定义尺寸
   - 测试 320x320（手表尺寸）

2. **自定义尺寸**
   - 点击 "Responsive"
   - 输入宽度: 320
   - 输入高度: 320

### 清除缓存测试

```javascript
// 在浏览器控制台运行
localStorage.clear();
location.reload();
```

### 测试 Service Worker

```javascript
// 查看 Service Worker 状态
navigator.serviceWorker.getRegistrations().then(registrations => {
    console.log('已注册的 Service Workers:', registrations);
});

// 注销 Service Worker
navigator.serviceWorker.getRegistrations().then(registrations => {
    registrations.forEach(registration => registration.unregister());
});
```

## 📊 性能检查

### 使用 Lighthouse

1. 打开 Chrome DevTools (F12)
2. 切换到 "Lighthouse" 标签
3. 选择 "Progressive Web App"
4. 点击 "Generate report"
5. 查看 PWA 评分和建议

### 检查项目

- Performance: > 90
- PWA: > 90
- Accessibility: > 90
- Best Practices: > 90

## 🎯 模拟手表环境

### 设置浏览器

1. **打开 DevTools**
2. **设置设备**
   - 宽度: 320px
   - 高度: 360px
   - Device pixel ratio: 2
3. **限制网络**
   - 选择 "Fast 3G" 模拟手表网络
4. **限制 CPU**
   - 选择 "4x slowdown" 模拟手表性能

### 使用 test.html

直接打开 `watch/test.html`，它会：
- 显示方形手表屏幕（320×360）
- 模拟真实手表外观
- 提供测试按钮
- 显示使用说明

## ✅ 测试通过标准

### 必须通过

- ✅ 所有功能正常工作
- ✅ 数据能正确保存和读取
- ✅ 在 320x320 屏幕上显示正常
- ✅ 点击响应灵敏
- ✅ 没有 JavaScript 错误

### 建议达到

- ✅ PWA Lighthouse 评分 > 90
- ✅ 首次加载 < 3 秒
- ✅ 可以添加到主屏幕
- ✅ 离线可用
- ✅ 动画流畅

## 🚀 测试完成后

1. **修复发现的问题**
2. **在手机上再次测试**
3. **准备部署到生产环境**
4. **生成二维码**
5. **在真实手表上测试**

---

**提示**: 建议先在电脑和手机上充分测试，确认一切正常后再部署给孩子使用。
